# 🛒 Open Market Service
이스트소프트캠프 2차 팀 프로젝트
## 1. 프로젝트 개요
본 프로젝트는 판매자와 구매자를 구분하여 상품 거래를 중개하는 오픈마켓 서비스를 구현하는 것입니다. 

판매자는 상품을 등록하고 판매 관리를 할 수 있으며, 구매자는 상품을 검색하고 구매할 수 있는 오픈마켓 서비스입니다.

이번 프로젝트에서는 구매자 관련 기능만 진행하였습니다.

## 2. 프로젝트 목표
팀원간 역할 분담을 통한 협업 개발을 진행하며,    
단순 기능 구현을 넘어 프론트엔드 개발 흐름에 대한 전반적인 이해와 Git을 활용한 버전 관리 경험을 통해 개발 역량 향상을 목표로 합니다.
## 3. 팀원 소개
- #### FE: 최진호(팀장)
- #### FE: 김동욱
- #### FE: 백기연

## 4. 프로젝트 소개
### 4-1. 기술 스택 및 개발 환경
- **HTML5**: 시맨틱 마크업 활용
- **CSS3** + **SCSS**: 가독성과 재사용성을 고려
- **Vanilla JavaScript ES6+**: ES6 이상의 문법을 사용하여 순수 자바스크립트만으로 개발
- **개발 환경**: VS Code, Live Server, npm SCSS
     
### 4-2. 네이밍 규칙 및 컨벤션
- **BEM 방법론** (Block, Element, Modifier)
- 모든 파일 들여쓰기: **4**칸
- 접근성을 고려한 태그 사용, 적절한 대체 텍스트 제공, w3c 웹 표준 검사 완료
- 오픈 그래프 프로토콜 구현
 <img width="548" height="164" alt="image" src="https://github.com/user-attachments/assets/b563b13a-6db2-40fd-a4b9-3a01a7f8bafa" />


#### 💻 코드 컨벤션
   ####  HTML
   - 태그는 소문자로 작성
   - 속성 순서: ```id``` → ```class``` → ```name``` → ```data-*``` → ```src/href``` → 기타
   - 모든 태그는 명확하게 닫기
   - 의미에 맞는 시멘틱 태그 사용 권장 (```<section>```, ```<nav>```, ```<main>``` 등)

   ####  Sass / SCSS
   - 변수, 믹스인, 함수는 kebab-case 사용 (```$primary-color```)
   - Nesting은 2단계까지만 허용
   - 공통 스타일은 따로 분리
   
   ####  JavaScript
   - ```const```, ```let``` 사용 (```var``` 사용 금지)
   - 세미콜론(;) 필수
   - 변수/함수명은 camelCase, 클래스명은 PascalCase
   - 한 파일에는 하나의 주요 기능만 구현

#### 💬 커밋 컨벤션
   ####  브랜치 전략 (GitHub Flow)
   - **main** (배포용), **dev** (개발용), **feature/기능명** (기능별) 구조로 브랜치를 나누어 관리
   - 버그 수정 시: **fix/버그명**

### 4-3. 협업 PR (Pull Request) 워크플로우
1. **브랜치별 개발**: 각자 feature 브랜치에서 작업 후 PR 생성
2. **PR 생성** - wiki의 pr 템플릿 사용
3. **PR 코드 리뷰 및 승인**: 최소1명 이상의 팀원 승인 필요
4. **merge**: 피드백 반영 후 merge
5. **최종 merge 후 배포**: 모든 구현 완료 후 dev 브랜치에서 main 브랜치로 merge

### 4-4. 프로젝트 폴더 구조
```
📦src
 ┣ 📂assets            // 이미지, 아이콘, 폰트 등
 ┃ ┣ 📂css
 ┃ ┃ ┣ 📜style.css     // 최종 css
 ┃ ┣ 📂fonts           // 폰트
 ┃ ┣ 📂icons           // 이미지, 아이콘
 ┣ 📂components        // JavaScript UI 컴포넌트
 ┣ 📂pages             // 각 페이지별 HTML
 ┣ 📂services          // API 호출 모듈 + 서비스 로직
 ┣ 📂styles            // Sass 스타일 관련
 ┃ ┣ 📂base            // 초기 세팅, 글꼴, 리셋 스타일 등
 ┃ ┣ 📂components      // UI 컴포넌트
 ┃ ┣ 📜style.css.map
 ┃ ┗ 📜style.scss
 ┗ 📂utils             // 공통 유틸 함수
📜index.html           // 메인 HTML

```

***

### 4-5. 구현 페이지별 역할 분담
**최진호(팀장)**   
-  로그인 페이지   
-  회원 가입 페이지

**백기연**   
-  상품 목록 페이지   
-  상품 상세 페이지

**김동욱**   
-  장바구니 페이지   
-  주문/결제 페이지

### 4-6. 페이지별 상세 기능    
  **1) 로그인 페이지**
  
  - **경고 문구**: 아이디나 비밀번호가 일치하지 않거나, 아이디나 비밀번호를 입력하지 않은 채 로그인 버튼을 누르면 경고 문구 나타남    
  - **로그인 버튼 비활성화**: 입력 창 아래에 경고창이 나타나면 로그인 버튼 비활성화    
  - **focus 이벤트**: 입력 창에 입력이 안된 부분이 존재한 채로 로그인 버튼 클릭 시 입력되지 않은 입력 창에 focus 이벤트가 작동하고 로그인 불가    
  - **비밀번호 초기화**: 아이디나 비밀번호가 일치하지 않는다면, 비밀번호 입력창에 focus이벤트가 발생하고 빈칸이 됨    
  - **페이지 이동**: 로그인 성공할 시, 로그인하기 이전 페이지로 이동    
  - **구매자 로그인** : 구매 회원 로그인 탭 클릭 시 구매 회원으로 로그인    
  ![Image](https://github.com/user-attachments/assets/d02e2612-fc96-4117-84e8-2e51960e11f8)    

  **2) 회원가입 페이지**
  
  - **회원가입 조건**: 회원가입 시 모든 입력을 완료하고 동의하기 체크를 눌러야만 회원가입 가능
  - **페이지 이동**: 회원 정보 입력 후 회원가입 버튼 클릭 시 로그인 페이지로 이동
  - **아이디 중복 방지**: 아이디의 중복 확인 버튼 클릭 시 중복이 된다면 입력창 아래에 경고 문구가 나타남
  - **구매자 회원가입** : 구매 회원 가입 탭 클릭 후, 모든 입력을 마친 뒤(이용약관 체크박스 포함) 가입하기 버튼 클릭 시 구매자 회원가입
  ![Image](https://github.com/user-attachments/assets/9a0a37af-db4d-403e-9d0d-62f26b6334ad)

  **3) 상품 목록 페이지**
  
  - **페이지 이동**: 목록에서 상품 클릭 시 상품 상세 페이지로 이동
  - **상품 정보 표시**: 상품 판매자, 상품명, 가격 정보 나타남
  ![Image](https://github.com/user-attachments/assets/d36f07f3-9a66-4acc-8e5f-90c43919f0d4)

  **4) 상품 상세 페이지**
  
  - **해당 상품 정보 표시**: productId에 해당하는 상품을 불러오고, 해당 상품 정보를 보여줌
  - **수량 변경**: `+` 버튼과 `-` 버튼을 사용해야만 수량 변경 가능
  - **재고 초과 처리**: 수량 변경 시 현재 상품의 재고 수량을 초과하면 `+` 버튼 비활성화
  - **상품 가격 계산**: 선택된 옵션에 맞춰서 가격 계산과 총 가격 나타남
  - **중복 상품 선택 불가**: 이미 선택된 상품을 다시 선택하였을 때, 상품은 추가되지 않음
  ![Image](https://github.com/user-attachments/assets/220f89a1-bd45-4c2f-9fde-41b967e85217)

  **5) 장바구니 페이지**
  
  - **수량 변경 모달**: 장바구니에서 상품의 수량을 수정할 때, `+`나 `-` 버튼을 클릭 시 수량 수정을 위한 모달창 나타남.    
    모달창에서 (상품 상세 페이지와 마찬가지로) 상품의 재고 수량 초과 시 `+` 버튼 비활성화
  - **총 결제 가격**: 선택된 정보만 총 상품금액과 할인, 배송비가 적용되어 총 결제할 가격 나타남
  - **상품 삭제 모달**: 상품의 `x` 버튼을 클릭할 시 상품 삭제를 재확인하는 모달 창이 중앙에 나타남
  - **상품 삭제 버튼**: 상품 삭제를 재확인하는 모달의 확인 버튼 클릭 시 상품 삭제
  - **수량 추가**: 이미 장바구니에 넣은 제품을 다시 넣는 경우, 이전 수량과 합쳐짐
      - 예) 기존 수량 2개, 추가 수량 3개 ⇒ 총 수량 5개)
  - **재고 초과 모달**: 합쳐진 수량이 제품의 재고 수량 보다 많을 경우, 재고 수량이 초과 되었다는 모달창 나타남
  ![Image](https://github.com/user-attachments/assets/4eb952a4-ec3d-4759-93a4-39240ebd5087)

  **6) 페이지 상단 글로벌 네비게이션 영역(GNB)**
  
  - 상단 검색창은 UI로만 존재
  - 구매 회원, 비로그인 회원의 페이지 상단 바에는 검색창과 장바구니 버튼만 존재
      - 비로그인 유저일 경우 모달창으로 로그인 안내
      - 장바구니 버튼 클릭 시 장바구니 페이지로 이동
  
  **7) 주문/결제 페이지**
  
  - 상품 정보 수정 불가
  - 배송 정보 칸에 주문자 정보와 배송지 정보를 입력 가능
  - 모든 입력이 완료되어야 결제하기 버튼 활성화
  - 결제하기 버튼 클릭 시 결제 진행
  ![Image](https://github.com/user-attachments/assets/03bd44d3-66f1-4781-8643-a08babda4ec2)

  **8) 로그인을 요청하는 모달**
  
  - 비로그인 사용자는 장바구니, 바로구매를 클릭했을 시 로그인을 요청하는 모달 창이 뜸
  
  **9) 마이페이지** 
  
  - **드롭다운 박스**: 상단 네비게이션에 있는 마이페이지 클릭 시 마이페이지,로그아웃 기능이 있는 드롭다운 박스 생성
  - **마이페이지**: 드롭다운 박스에 있는 마이페이지는 UI로만 존재
  - **로그아웃**: 드롭다운 박스에 있는 로그아웃 클릭 시 로그아웃 됨
  - 마이페이지 아이콘을 클릭 시 아이콘은 메인컬러로 변경, 드롭다운 UI가 나타남
  -  드롭다운 외부를 클릭 시 드롭다운 UI 사라짐

  **10) 푸터(Footer)**
  - 피그마 그대로 구현
  
### 4-7. 주요기능

#### 회원 가입 페이지 주요 기능 및 코드    

**주요 기능**    
- 사용자 입력 검증    
- 폼 제출 제어
  
**구현 방법**    
- 아이디 정규식 검사    
- 비밀번호 조건 및 일치 검사    
- 가입하기 버튼 제어 - 기본적으로 disabled, 모든 검사 통과하면 active로 변경
  
**문제 해결**    
- 조건 만족 했는데 버튼 비활성화 - addEventListener로 상태 갱신    
- 서버 응답에 따라 필드에 에러 메세지 파싱해서 출력    
<img width="566" height="525" alt="image" src="https://github.com/user-attachments/assets/9aaf3f1c-7333-495b-81ae-317144dc523a" />    

#### 로그인 페이지 주요 기능 및 코드    

**주요 기능**      
- 사용자 로그인 처리: API로 요청을 보내고 성공시 인증 토큰 및 정보 저장    
- 로그인 후 페이지 이동: 로그인 성공 시 이전 페이지나 메인 페이지로 이동
  
**구현 방법**    
- response.ok가 true이면 access,refresh 토큰과 userInfo를 로컬 스토리지에 저장    
- document.referrer를 이용해 로그인 요청 전 머물렀던 페이지로 이동 - 만약 referrer이 로그인 페이지면 메인 페이지로 이동
  
**문제 해결**    
- try catch로 네트워크 지연이나 API 응답 대응    
- 로그인 전 머물렀던 페이지로 이동시켜 사용자의 흐름을 끊지않는 UX 제공    
<img width="498" height="446" alt="image" src="https://github.com/user-attachments/assets/59df0619-d0d3-4b8c-8f82-1aa0c98dc649" />    

#### 상품 목록 페이지 주요 기능 및 코드    

**주요 기능**      
-전체 상품을 서버에서 가져와 렌더링 구현하는 기능으로 서버와 api 통신 하는 부분   

**구현 방법**    
- 전제척인 흐름: 서버 api 호출 => 데이터 전역 변수에 저장 => 렌더링 함수에 변수 전달    
1. API 주소 설정 → marketProductsUrl    
2. 비동기 요청 → fetch()로 상품 데이터 요청    
3.에러 검사 → 응답 상태 코드 확인    
4. JSON 파싱 → res.json()으로 데이터 구조화   
5. 데이터 저장 및 반환 → productData에 저장하고 반환    
6. 예외 처리 → 실패 시 console.log()와 alert() 실행,null 반환    
7. 모듈화 → 외부의 렌더링 해주는 함수에 변수 전달할 수 있도록 export
   
**문제해결**    
- 문제: 전체 상품을 가져오는 요청을 어떻게 할 것인지    
- 해결:  GET메서드 사용, 비동기 fetch함수 사용, 해당  api 주소로 상품 데이터 요청    
<img width="474" height="463" alt="image" src="https://github.com/user-attachments/assets/3741e370-47e0-4189-94b1-e1d0bf09834e" />    

#### 상품 상세 페이지 주요 기능 및 코드    
**주요 기능**    
- 사용자가 선택한 상품의 id에 해당하는 상품 불러오기
   
**구현 방법**    
1. 상품 목록에서 상품 클릭 시 URL에 해당 ID 값 저장    
2. URL을 객체에 저장 후 id 값만 가져와 변수에 저장    
3. fetchProductById에 변수로 id값 넘겨줌→ API 호출로 해당 상품 상세 데이터 요청    
4. 성공 시 렌더링 → renderProductDetail()으로 화면 구성    
5. 실패 시 알림 → 상품이 없거나 오류 발생 시 사용자에게 alert 표시
   
**문제해결**    
- 문제: 해당 id 값을 어떻게 전달할 것인지    
- 해결: URL에 저장 후 전달     
<img width="445" height="70" alt="image" src="https://github.com/user-attachments/assets/53096eed-b510-48fa-a268-06a409332e24" />    
<img width="566" height="505" alt="image" src="https://github.com/user-attachments/assets/1dcd404d-7204-44a6-95df-bf23b6313f13" />     

#### 장바구니 페이지 주요 기능 및 코드    
**주요 기능**    
- 실시간 상호작용을 통한 장바구니 상태 관리
  
**구현 방법**    
- cartData라는 중앙 상태 저장소를 만듦    
- UI의 어떤 부분(장바구니 목록, 모달창 등)이든 이 상태를 조회하고, 상태에 기반하여 동작하도록 구현
  
**문제해결**    
- 문제: 다수의 동적 상품에 대한 이벤트를 어떻게 효율적으로 관리할 것인가?,    
- 해결:      
- 이벤트 위임과 데이터 속성을 활용하였습니다.    
- 이벤트 발생 시 e.target을 확인하여 실제 클릭된 요소를 찾고,  요소에 미리 부여한 data-item-id 속성을 읽어 어떤 상품에 대한 요청인지 식별하였습니다.    
- 이 방식을 통해 메모리 사용량을 줄여 성능을 최적화하였습니다.    
<img width="484" height="292" alt="image" src="https://github.com/user-attachments/assets/9b64998d-7f42-4bad-b3d3-a104801f0dd9" />    

#### 결제/주문하기 페이지 주요기능 및 코드    
**주요 기능**    
- 클라이언트의 두 가지 다른 구매 의도를 분기처리 하는것
  
**구현 방법**    
- 특정 상품 하나만 바로 주문하는 경우와 여러 상품을 장바구니에 담아 주문하는 경우를 쿼리스트링으로 구분하였고,  서버에 전달할 데이터 형식을 분기처리하여 전달하였습니다.
  
**문제해결**    
- 문제: 어떻게 하면 결제 페이지가 '바로 구매'와 '장바구니 구매'라는 두 가지 다른 경로로부터 일관된 방식으로 주문 상품 데이터를 전달받을 수 있는가?    
- 해결: 쿼리스트링을 이용하였으며 쿼리스트링으로 전달 할 정보가 민감정보는 아니기에 쿼리스트링 방식을 이용했습니다.    
 <img width="457" height="254" alt="image" src="https://github.com/user-attachments/assets/c7e645cc-3e17-406a-9914-56a922f96135" />    

